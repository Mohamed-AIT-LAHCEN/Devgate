(function(){"use strict";var e={5448:function(e,t,a){var o=a(5130),s=a(6768),l=a(4232),r=a.p+"img/image.1d81a794.png";const i={id:"app"},n={class:"navbar"},c={class:"nav-links"},u={class:"main-content"};function d(e,t,a,o,d,p){const v=(0,s.g2)("RouterLink"),m=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",i,[(0,s.Lk)("nav",n,[t[12]||(t[12]=(0,s.Lk)("div",{class:"nav-logo"},[(0,s.Lk)("img",{src:r,alt:"DevGate Logo",class:"logo"}),(0,s.Lk)("span",{class:"brand"},"DevGate")],-1)),(0,s.Lk)("div",c,[(0,s.bF)(v,{to:"/"},{default:(0,s.k6)((()=>t[5]||(t[5]=[(0,s.eW)("Accueil")]))),_:1}),o.isLoggedIn?((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.Lk)("div",{class:"profile-dropdown",onMouseenter:t[2]||(t[2]=e=>o.showDropdown=!0),onMouseleave:t[3]||(t[3]=e=>o.showDropdown=!1)},[(0,s.Lk)("div",{class:"profile-avatar-nav",onClick:t[0]||(t[0]=(...e)=>o.goToProfile&&o.goToProfile(...e)),style:{cursor:"pointer"}},[(0,s.Lk)("span",null,(0,l.v_)(o.userInitials),1)]),(0,s.Lk)("span",{class:"profile-name-nav",onClick:t[1]||(t[1]=(...e)=>o.goToProfile&&o.goToProfile(...e)),style:{cursor:"pointer"}},(0,l.v_)(o.userName),1)],32),o.isLoggedIn?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:t[4]||(t[4]=(...e)=>o.logout&&o.logout(...e)),class:"btn btn-secondary logout-navbar"},"Déconnexion")):(0,s.Q3)("",!0),(0,s.bF)(v,{to:"/AddProject"},{default:(0,s.k6)((()=>t[8]||(t[8]=[(0,s.eW)("Projets")]))),_:1}),(0,s.bF)(v,{to:"/GestComp"},{default:(0,s.k6)((()=>t[9]||(t[9]=[(0,s.eW)("Compétences")]))),_:1}),(0,s.bF)(v,{to:"/timeline"},{default:(0,s.k6)((()=>t[10]||(t[10]=[(0,s.eW)("Timeline")]))),_:1}),(0,s.bF)(v,{to:"/objectives"},{default:(0,s.k6)((()=>t[11]||(t[11]=[(0,s.eW)("Objectifs")]))),_:1})],64)):((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.bF)(v,{to:"/signUp"},{default:(0,s.k6)((()=>t[6]||(t[6]=[(0,s.eW)("Inscription")]))),_:1}),(0,s.bF)(v,{to:"/Login"},{default:(0,s.k6)((()=>t[7]||(t[7]=[(0,s.eW)("Connexion")]))),_:1})],64))])]),(0,s.Lk)("main",u,[(0,s.bF)(m)])])}a(4114),a(8111),a(1701);var p=a(144),v=a(1387),m={setup(){const e=(0,p.KR)(!1),t=(0,p.KR)(!1),a=(0,p.KR)(null),o=(0,v.rd)();(0,s.sV)((()=>{const t=localStorage.getItem("user");e.value=!!t,t&&(a.value=JSON.parse(t))}));const l=()=>{localStorage.removeItem("user"),window.location.reload()},r=(0,s.EW)((()=>a.value?a.value.displayName?a.value.displayName.split(" ").map((e=>e[0])).join("").toUpperCase():a.value.email?a.value.email[0].toUpperCase():"":"")),i=(0,s.EW)((()=>a.value?a.value.displayName||a.value.email:"")),n=()=>{o.push("/dashboard")};return{isLoggedIn:e,logout:l,userInitials:r,userName:i,showDropdown:t,goToProfile:n}}},k=a(1241);const b=(0,k.A)(m,[["render",d]]);var f=b;const g={class:"home-container"},L={class:"row justify-content-center"},y={class:"col-md-10"},h={class:"card mb-4"},C={class:"card-body"},w={class:"d-flex align-items-center mb-3"},j=["src"],E=["disabled"],U={key:0,class:"text-center py-5"},x={key:1,class:"text-center py-5"},P={key:2,class:"posts-list"};function _(e,t,a,l,r,i){const n=(0,s.g2)("PostCard");return(0,s.uX)(),(0,s.CE)("div",g,[(0,s.Lk)("div",L,[(0,s.Lk)("div",y,[(0,s.Lk)("div",h,[(0,s.Lk)("div",C,[(0,s.bo)((0,s.Lk)("textarea",{ref:"createPostInput","onUpdate:modelValue":t[0]||(t[0]=e=>l.postContent=e),placeholder:"What's happening?",class:"form-control mb-3",rows:"3"},null,512),[[o.Jo,l.postContent]]),(0,s.Lk)("div",w,[(0,s.Lk)("input",{type:"file",ref:"fileInput",onChange:t[1]||(t[1]=(...e)=>l.handleImageUpload&&l.handleImageUpload(...e)),accept:"image/*",class:"d-none"},null,544),(0,s.Lk)("button",{onClick:t[2]||(t[2]=t=>e.$refs.fileInput.click()),class:"btn btn-outline-secondary me-3"},t[4]||(t[4]=[(0,s.Lk)("i",{class:"fas fa-image"},null,-1),(0,s.eW)(" Add Image ")])),l.imagePreview?((0,s.uX)(),(0,s.CE)("img",{key:0,src:l.imagePreview,class:"img-thumbnail",style:{"max-width":"100px","max-height":"100px"}},null,8,j)):(0,s.Q3)("",!0)]),(0,s.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>l.createPost&&l.createPost(...e)),class:"btn btn-primary w-100",disabled:!l.canSubmit}," Post ",8,E)])]),l.loading?((0,s.uX)(),(0,s.CE)("div",U,t[5]||(t[5]=[(0,s.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,s.Lk)("span",{class:"visually-hidden"},"Loading...")],-1)]))):0===l.filteredPosts.length?((0,s.uX)(),(0,s.CE)("div",x,t[6]||(t[6]=[(0,s.Lk)("p",{class:"text-muted"},"No posts to display",-1)]))):((0,s.uX)(),(0,s.CE)("div",P,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.filteredPosts,(t=>((0,s.uX)(),(0,s.Wv)(n,{key:t.id,post:t,onPostUpdated:e.loadPosts},null,8,["post","onPostUpdated"])))),128))]))])])])}a(2489);var I=a(6400),X=a(7617),K=a(6971),A=a(7844);const R={apiKey:"AIzaSyCLA0FCC2Pj9Y8FINpBr05F-gH7xCl_laQ",authDomain:"devgate-project.firebaseapp.com",projectId:"devgate-project",storageBucket:"devgate-project.firebasestorage.app",messagingSenderId:"946114772418",appId:"1:946114772418:web:0f14565c053cbd642fea5b"},S=(0,I.Wp)(R),D=(0,X.aU)(S),F=(0,K.xI)(S),O=(0,A.c7)(S),V=(0,X.rJ)(D,"users"),N=(0,X.rJ)(D,"posts"),J=(0,X.rJ)(D,"followers"),W=(0,X.rJ)(D,"following"),M=async(e,t)=>{const a=(0,X.wP)(D),o=(0,X.H9)(W,e);a.set(o,{following:(0,X.hq)(t)},{merge:!0});const s=(0,X.H9)(J,t);a.set(s,{followers:(0,X.hq)(e)},{merge:!0}),await a.commit()},q=async(e,t)=>{const a=(0,X.wP)(D),o=(0,X.H9)(W,e);a.set(o,{following:(0,X.C3)(t)},{merge:!0});const s=(0,X.H9)(J,t);a.set(s,{followers:(0,X.C3)(e)},{merge:!0}),await a.commit()},Q=async e=>{const t=await(0,X.x7)((0,X.H9)(J,e)),a=t.data()?.followers||[],o=await Promise.all(a.map((async e=>{const t=await(0,X.x7)((0,X.H9)(V,e));return t.exists()?{id:t.id,...t.data()}:null})));return o.filter(Boolean)},G=async e=>{const t=await(0,X.x7)((0,X.H9)(W,e)),a=t.data()?.following||[],o=await Promise.all(a.map((async e=>{const t=await(0,X.x7)((0,X.H9)(V,e));return t.exists()?{id:t.id,...t.data()}:null})));return o.filter(Boolean)},$=async e=>{const t=(0,X.H9)(N);return await(0,X.BN)(t,{...e,createdAt:(0,X.O5)(),likes:[],comments:[]}),t.id},T=async e=>{const t=await(0,X.x7)((0,X.H9)(W,e)),a=t.data()?.following||[],o=(0,X.P)(N,(0,X._M)("authorId","in",[...a,e]),(0,X.My)("createdAt","desc")),s=await(0,X.GG)(o);return s.docs.map((e=>({id:e.id,...e.data()})))},H=async e=>{const t=(0,X.P)(N,(0,X._M)("authorId","==",e),(0,X.My)("createdAt","desc")),a=await(0,X.GG)(t);return a.docs.map((e=>({id:e.id,...e.data()})))},B=async()=>{const e=(0,X.P)((0,X.rJ)(D,"projects"),(0,X.My)("createdAt","desc")),t=await(0,X.GG)(e);return t.docs.map((e=>({id:e.id,...e.data()})))},z=async()=>{const e=(0,X.P)((0,X.rJ)(D,"objectives"),(0,X.My)("createdAt","desc")),t=await(0,X.GG)(e);return t.docs.map((e=>({id:e.id,...e.data()})))},Z=async()=>{const e=(0,X.P)((0,X.rJ)(D,"competitions"),(0,X.My)("createdAt","desc")),t=await(0,X.GG)(e);return t.docs.map((e=>({id:e.id,...e.data()})))};const Y={class:"card mb-3 post-card"},ee={class:"card-body d-flex"},te=["src"],ae={class:"flex-grow-1"},oe={class:"d-flex align-items-center mb-1"},se={class:"text-muted ms-2",style:{"font-size":"0.9em"}},le={class:"mb-2 post-content"},re={class:"mb-2"},ie={key:0,class:"badge bg-info me-2"},ne={key:1,class:"badge bg-success me-2"},ce={key:2,class:"badge bg-warning text-dark"},ue=["src"],de={class:"d-flex gap-3 border-top pt-3 mt-3"},pe={class:"d-flex gap-4 mt-2 small text-muted likes-comments-count"},ve={key:1,class:"mt-3 border-top pt-3"},me=["src"],ke={class:"flex-grow-1"},be={class:"mb-1"},fe={class:"mb-0"},ge={class:"input-group"},Le={key:2,class:"modal-backdrop"},ye={class:"modal-dialog-centered modal-confirm"},he={class:"modal-content bg-dark text-white p-4 rounded"},Ce={class:"d-flex justify-content-end gap-2 mt-3"};function we(e,t,a,r,i,n){return(0,s.uX)(),(0,s.CE)("div",Y,[(0,s.Lk)("div",ee,[(0,s.Lk)("img",{src:a.post.authorAvatar,class:"rounded-circle me-3 post-avatar",style:{width:"48px",height:"48px",cursor:"pointer"},onClick:t[0]||(t[0]=e=>r.goToProfile(a.post.authorId))},null,8,te),(0,s.Lk)("div",ae,[(0,s.Lk)("div",oe,[(0,s.Lk)("span",{class:"fw-bold post-author",style:{cursor:"pointer"},onClick:t[1]||(t[1]=e=>r.goToProfile(a.post.authorId))},(0,l.v_)(a.post.authorName),1),(0,s.Lk)("span",se,(0,l.v_)(r.formatDate(a.post.createdAt)),1),r.canDelete?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:t[2]||(t[2]=e=>r.showDeleteModal=!0),class:"btn btn-link btn-sm text-danger ms-auto",title:"Delete post"}," Delete ")):(0,s.Q3)("",!0)]),(0,s.Lk)("div",le,(0,l.v_)(a.post.content),1),(0,s.Lk)("div",re,[a.post.project?((0,s.uX)(),(0,s.CE)("span",ie,"Projet: "+(0,l.v_)(a.post.project.title),1)):(0,s.Q3)("",!0),a.post.objective?((0,s.uX)(),(0,s.CE)("span",ne,"Objectif: "+(0,l.v_)(a.post.objective.title),1)):(0,s.Q3)("",!0),a.post.competition?((0,s.uX)(),(0,s.CE)("span",ce,"Compétition: "+(0,l.v_)(a.post.competition.title),1)):(0,s.Q3)("",!0)]),a.post.image?((0,s.uX)(),(0,s.CE)("img",{key:0,src:a.post.image,class:"img-fluid rounded mt-2",style:{"max-width":"300px"}},null,8,ue)):(0,s.Q3)("",!0),(0,s.Lk)("div",de,[(0,s.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>r.toggleLike&&r.toggleLike(...e)),class:(0,l.C4)(["btn",r.isLiked?"btn-secondary":"btn-outline-danger","btn-sm","d-flex","align-items-center"])},[t[9]||(t[9]=(0,s.Lk)("i",{class:"fas fa-heart me-1"},null,-1)),(0,s.Lk)("span",null,(0,l.v_)(r.isLiked?"Liked":"Like"),1)],2),(0,s.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>r.toggleComments&&r.toggleComments(...e)),class:"btn btn-outline-primary btn-sm d-flex align-items-center"},t[10]||(t[10]=[(0,s.Lk)("i",{class:"fas fa-comment me-1"},null,-1),(0,s.eW)(" Comment ")]))]),(0,s.Lk)("div",pe,[(0,s.Lk)("span",null,[t[11]||(t[11]=(0,s.Lk)("i",{class:"fas fa-heart me-1"},null,-1)),(0,s.eW)((0,l.v_)(a.post.likes&&a.post.likes.length?a.post.likes.length:0)+" likes",1)]),(0,s.Lk)("span",null,[t[12]||(t[12]=(0,s.Lk)("i",{class:"fas fa-comment me-1"},null,-1)),(0,s.eW)((0,l.v_)(a.post.comments&&a.post.comments.length?a.post.comments.length:0)+" comments",1)])]),r.showComments?((0,s.uX)(),(0,s.CE)("div",ve,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.post.comments,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"d-flex mb-3"},[(0,s.Lk)("img",{src:e.authorAvatar,alt:"Commenter",class:"rounded-circle me-2",style:{width:"32px",height:"32px"}},null,8,me),(0,s.Lk)("div",ke,[(0,s.Lk)("h6",be,(0,l.v_)(e.authorName),1),(0,s.Lk)("p",fe,(0,l.v_)(e.content),1)])])))),128)),(0,s.Lk)("div",ge,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>r.newComment=e),type:"text",class:"form-control",placeholder:"Add a comment..."},null,512),[[o.Jo,r.newComment]]),(0,s.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>r.addComment&&r.addComment(...e)),class:"btn btn-primary"},"Post")])])):(0,s.Q3)("",!0),r.showDeleteModal?((0,s.uX)(),(0,s.CE)("div",Le,[(0,s.Lk)("div",ye,[(0,s.Lk)("div",he,[t[13]||(t[13]=(0,s.Lk)("h5",{class:"mb-3"},"Delete Post",-1)),t[14]||(t[14]=(0,s.Lk)("p",null,"Are you sure you want to delete this post?",-1)),(0,s.Lk)("div",Ce,[(0,s.Lk)("button",{class:"btn btn-secondary",onClick:t[7]||(t[7]=e=>r.showDeleteModal=!1)},"Cancel"),(0,s.Lk)("button",{class:"btn btn-danger",onClick:t[8]||(t[8]=(...e)=>r.confirmDelete&&r.confirmDelete(...e))},"Delete")])])])])):(0,s.Q3)("",!0)])])])}var je={name:"PostCard",props:{post:{type:Object,required:!0}},emits:["post-updated"],setup(e,{emit:t}){const a=(0,p.KR)(!1),o=(0,p.KR)(""),l=(0,p.KR)(!1),r=(0,v.rd)(),i=(0,s.EW)((()=>!(!e.post.likes||!F.currentUser)&&e.post.likes.includes(F.currentUser.uid))),n=(0,s.EW)((()=>F.currentUser&&e.post.authorId===F.currentUser.uid)),c=e=>{if(!e)return"";const t=e.toDate?e.toDate():new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)},u=e=>{r.push(`/profile/${e}`)},d=async()=>{if(!F.currentUser)return void r.push("/login");const a=(0,X.H9)(D,"posts",e.post.id);i.value?await(0,X.mZ)(a,{likes:(0,X.C3)(F.currentUser.uid)}):await(0,X.mZ)(a,{likes:(0,X.hq)(F.currentUser.uid)}),t("post-updated")},m=()=>{F.currentUser?a.value=!a.value:r.push("/login")},k=async()=>{if(!o.value.trim()||!F.currentUser)return;const a=(0,X.H9)(D,"posts",e.post.id);await(0,X.mZ)(a,{comments:(0,X.hq)({id:Date.now(),content:o.value,authorId:F.currentUser.uid,authorName:F.currentUser.displayName,authorAvatar:F.currentUser.photoURL,createdAt:new Date})}),o.value="",t("post-updated")},b=async()=>{if(F.currentUser&&e.post.authorId===F.currentUser.uid)try{await(0,X.kd)((0,X.H9)(D,"posts",e.post.id)),l.value=!1,t("post-updated")}catch(a){console.error("Error deleting post:",a)}};return{showComments:a,newComment:o,isLiked:i,canDelete:n,formatDate:c,goToProfile:u,toggleLike:d,toggleComments:m,addComment:k,showDeleteModal:l,confirmDelete:b}}};const Ee=(0,k.A)(je,[["render",we],["__scopeId","data-v-f74988f8"]]);var Ue=Ee,xe={name:"HomePage",components:{PostCard:Ue},setup(){const e=(0,v.rd)(),t=(0,p.KR)(!0),a=(0,p.KR)([]),o=(0,p.KR)([]),l=(0,p.KR)([]),r=(0,p.KR)([]),i=(0,p.KR)(""),n=(0,p.KR)(null),c=(0,p.KR)(null),u=(0,p.KR)(null),d=(0,s.EW)((()=>a.value)),m=(0,s.EW)((()=>i.value.trim()||n.value)),k=e=>{const t=e.target.files[0];if(t){n.value=t;const e=new FileReader;e.onload=e=>{c.value=e.target.result},e.readAsDataURL(t)}},b=async()=>{if(!n.value)return null;const e=(0,A.KR)(O,`posts/${Date.now()}_${n.value.name}`);return await(0,A.D)(e,n.value),(0,A.qk)(e)},f=async()=>{if(F.currentUser)try{let e=null;n.value&&(e=await b());const t={content:i.value,image:e,authorId:F.currentUser.uid,authorName:F.currentUser.displayName,authorAvatar:F.currentUser.photoURL,createdAt:(0,X.O5)(),likes:[],comments:[]};await(0,X.gS)((0,X.rJ)(D,"posts"),t),i.value="",n.value=null,c.value=null,await g()}catch(e){console.error("Error creating post:",e)}},g=async()=>{try{const e=(0,X.P)((0,X.rJ)(D,"posts"),(0,X.My)("createdAt","desc"),(0,X.AB)(50)),t=await(0,X.GG)(e);a.value=t.docs.map((e=>({id:e.id,...e.data()})))}catch(e){console.error("Error loading posts:",e)}finally{t.value=!1}},L=async()=>{try{const e=(0,X.P)((0,X.rJ)(D,"projects"),(0,X.My)("createdAt","desc"),(0,X.AB)(10)),t=await(0,X.GG)(e);o.value=t.docs.map((e=>({id:e.id,...e.data()})))}catch(e){console.error("Error loading projects:",e)}},y=async()=>{try{const e=(0,X.P)((0,X.rJ)(D,"objectives"),(0,X.My)("createdAt","desc"),(0,X.AB)(10)),t=await(0,X.GG)(e);l.value=t.docs.map((e=>({id:e.id,...e.data()})))}catch(e){console.error("Error loading objectives:",e)}},h=async()=>{try{const e=(0,X.P)((0,X.rJ)(D,"competitions"),(0,X.My)("createdAt","desc"),(0,X.AB)(10)),t=await(0,X.GG)(e);r.value=t.docs.map((e=>({id:e.id,...e.data()})))}catch(e){console.error("Error loading competitions:",e)}};return(0,s.sV)((async()=>{(0,K.hg)(F,(async e=>{u.value=e,await Promise.all([g(),L(),y(),h()])}))})),{router:e,loading:t,posts:a,projects:o,objectives:l,competitions:r,postContent:i,imagePreview:c,filteredPosts:d,canSubmit:m,handleImageUpload:k,createPost:f}}};const Pe=(0,k.A)(xe,[["render",_],["__scopeId","data-v-a6514cea"]]);var _e=Pe;const Ie={class:"signup-container"},Xe={class:"card signup-card"},Ke={class:"form-group"},Ae={class:"form-group"},Re={class:"form-group"},Se={key:0,class:"error-message"};function De(e,t,a,r,i,n){return(0,s.uX)(),(0,s.CE)("div",Ie,[(0,s.Lk)("div",Xe,[t[8]||(t[8]=(0,s.Lk)("h2",{class:"page-title"},"Inscription",-1)),(0,s.Lk)("form",{onSubmit:t[3]||(t[3]=(0,o.D$)(((...e)=>r.signUp&&r.signUp(...e)),["prevent"])),class:"signup-form"},[(0,s.Lk)("div",Ke,[t[4]||(t[4]=(0,s.Lk)("label",{for:"name"},"Nom complet",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>r.name=e),required:""},null,512),[[o.Jo,r.name]])]),(0,s.Lk)("div",Ae,[t[5]||(t[5]=(0,s.Lk)("label",{for:"email"},"Email",-1)),(0,s.bo)((0,s.Lk)("input",{type:"email","onUpdate:modelValue":t[1]||(t[1]=e=>r.email=e),required:""},null,512),[[o.Jo,r.email]])]),(0,s.Lk)("div",Re,[t[6]||(t[6]=(0,s.Lk)("label",{for:"password"},"Mot de passe",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=e=>r.password=e),required:""},null,512),[[o.Jo,r.password]])]),t[7]||(t[7]=(0,s.Lk)("div",{class:"form-actions"},[(0,s.Lk)("button",{type:"submit",class:"btn btn-submit"},"S'inscrire")],-1)),r.error?((0,s.uX)(),(0,s.CE)("div",Se,(0,l.v_)(r.error),1)):(0,s.Q3)("",!0)],32)])])}var Fe={name:"SignUpPage",setup(){const e=(0,p.KR)(""),t=(0,p.KR)(""),a=(0,p.KR)(""),o=(0,p.KR)(""),s=async()=>{o.value="";try{const o=await(0,K.eJ)(F,t.value,a.value),s=o.user;await(0,K.r7)(s,{displayName:e.value}),localStorage.setItem("user",JSON.stringify({uid:s.uid,email:s.email,displayName:e.value})),await(0,K.x9)(F,t.value,a.value),await cs.push("/"),window.location.reload()}catch(s){o.value=s.message}};return{name:e,email:t,password:a,error:o,signUp:s}}};const Oe=(0,k.A)(Fe,[["render",De],["__scopeId","data-v-6b5c4efe"]]);var Ve=Oe;const Ne={class:"login-container"},Je={class:"card login-card"},We={class:"form-group"},Me={class:"form-group"},qe={key:0,class:"error-message"},Qe={class:"text-center mt-3"};function Ge(e,t,a,r,i,n){return(0,s.uX)(),(0,s.CE)("div",Ne,[(0,s.Lk)("div",Je,[t[7]||(t[7]=(0,s.Lk)("h2",{class:"page-title"},"Connexion",-1)),(0,s.Lk)("form",{onSubmit:t[2]||(t[2]=(0,o.D$)(((...e)=>r.login&&r.login(...e)),["prevent"])),class:"login-form"},[(0,s.Lk)("div",We,[t[4]||(t[4]=(0,s.Lk)("label",{for:"email"},"Email",-1)),(0,s.bo)((0,s.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>r.email=e),required:""},null,512),[[o.Jo,r.email]])]),(0,s.Lk)("div",Me,[t[5]||(t[5]=(0,s.Lk)("label",{for:"password"},"Mot de passe",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>r.password=e),required:""},null,512),[[o.Jo,r.password]])]),t[6]||(t[6]=(0,s.Lk)("div",{class:"form-actions"},[(0,s.Lk)("button",{type:"submit",class:"btn btn-submit"},"Se connecter")],-1)),r.error?((0,s.uX)(),(0,s.CE)("div",qe,(0,l.v_)(r.error),1)):(0,s.Q3)("",!0)],32),(0,s.Lk)("div",Qe,[(0,s.Lk)("button",{class:"btn btn-outline-secondary",onClick:t[3]||(t[3]=(...e)=>r.goToSignup&&r.goToSignup(...e))},"Create Account")])])])}var $e={name:"LoginPage",setup(){const e=(0,p.KR)(""),t=(0,p.KR)(""),a=(0,p.KR)(""),o=(0,v.rd)(),s=async()=>{a.value="";try{const a=await(0,K.x9)(F,e.value,t.value),s=a.user;localStorage.setItem("user",JSON.stringify({uid:s.uid,email:s.email,displayName:s.displayName})),await o.push("/"),window.location.reload()}catch(s){a.value=s.message}};function l(){o.push("/inscription")}return{email:e,password:t,error:a,login:s,goToSignup:l}}};const Te=(0,k.A)($e,[["render",Ge],["__scopeId","data-v-94b7f954"]]);var He=Te;const Be={class:"projects-container"},ze={class:"card projects-card"},Ze={class:"add-project-section"},Ye={key:0},et={class:"cancel-section"},tt={class:"form-title"},at={class:"form-group"},ot={class:"form-group"},st={class:"form-group"},lt=["onUpdate:modelValue"],rt={class:"form-group"},it={class:"form-group"},nt=["src"],ct={class:"form-actions"},ut={type:"submit",class:"btn btn-submit"},dt={key:0,class:"error-message"},pt={class:"projects-list"},vt={class:"project-info"},mt=["href"],kt=["src"],bt={class:"project-actions"},ft=["onClick"],gt=["onClick"];function Lt(e,t,a,r,i,n){return(0,s.uX)(),(0,s.CE)("div",Be,[(0,s.Lk)("div",ze,[t[16]||(t[16]=(0,s.Lk)("h2",{class:"page-title"},"Mes Projets",-1)),(0,s.Lk)("div",Ze,[r.formVisible?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:t[0]||(t[0]=(...e)=>r.showAddForm&&r.showAddForm(...e)),class:"btn btn-primary"},"Ajouter un projet"))]),(0,s.bF)(o.eB,{name:"slide-fade"},{default:(0,s.k6)((()=>[r.formVisible?((0,s.uX)(),(0,s.CE)("div",Ye,[(0,s.Lk)("div",et,[(0,s.Lk)("button",{type:"button",onClick:t[1]||(t[1]=(...e)=>r.hideForm&&r.hideForm(...e)),class:"btn btn-cancel"},"Annuler")]),(0,s.Lk)("form",{onSubmit:t[7]||(t[7]=(0,o.D$)((e=>-1===r.editingIndex?r.addProject():r.updateProject()),["prevent"])),class:"project-form"},[(0,s.Lk)("h3",tt,(0,l.v_)(-1===r.editingIndex?"Ajouter un projet":"Modifier le projet"),1),(0,s.Lk)("div",at,[t[8]||(t[8]=(0,s.Lk)("label",{for:"title"},"Titre",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>r.title=e),required:""},null,512),[[o.Jo,r.title]])]),(0,s.Lk)("div",ot,[t[9]||(t[9]=(0,s.Lk)("label",{for:"description"},"Description",-1)),(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>r.description=e),required:""},null,512),[[o.Jo,r.description]])]),(0,s.Lk)("div",st,[t[10]||(t[10]=(0,s.Lk)("label",{for:"stack"},"Stack utilisés",-1)),(0,s.Lk)("button",{type:"button",onClick:t[4]||(t[4]=(...e)=>r.addStack&&r.addStack(...e)),class:"btn btn-success"},"Ajouter un stack"),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.stacks,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t},[(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":e=>r.stacks[t]=e,placeholder:"Ajouter un stack",required:""},null,8,lt),[[o.Jo,r.stacks[t]]])])))),128))]),(0,s.Lk)("div",rt,[t[11]||(t[11]=(0,s.Lk)("label",{for:"github"},"Lien github",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>r.github=e),required:""},null,512),[[o.Jo,r.github]])]),(0,s.Lk)("div",it,[t[12]||(t[12]=(0,s.Lk)("label",{for:"image"},"Image du projet",-1)),(0,s.Lk)("input",{type:"file",onChange:t[6]||(t[6]=(...e)=>r.handleImage&&r.handleImage(...e)),accept:"image/*"},null,32),r.imagePreview?((0,s.uX)(),(0,s.CE)("img",{key:0,src:r.imagePreview,alt:"Aperçu image",class:"preview-image"},null,8,nt)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",ct,[(0,s.Lk)("button",ut,(0,l.v_)(-1===r.editingIndex?"Ajouter":"Mettre à jour"),1)]),r.error?((0,s.uX)(),(0,s.CE)("div",dt,(0,l.v_)(r.error),1)):(0,s.Q3)("",!0)],32)])):(0,s.Q3)("",!0)])),_:1}),(0,s.Lk)("div",pt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.projects,((e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"project-item"},[(0,s.Lk)("div",vt,[(0,s.Lk)("h3",null,(0,l.v_)(e.title),1),(0,s.Lk)("p",null,(0,l.v_)(e.description),1),(0,s.Lk)("p",null,[t[13]||(t[13]=(0,s.Lk)("strong",null,"Stack :",-1)),(0,s.eW)(" "+(0,l.v_)(Array.isArray(e.stacks)?e.stacks.join(", "):""),1)]),(0,s.Lk)("p",null,[t[14]||(t[14]=(0,s.Lk)("strong",null,"Github :",-1)),t[15]||(t[15]=(0,s.eW)()),(0,s.Lk)("a",{href:e.github,target:"_blank"},(0,l.v_)(e.github),9,mt)]),e.imageUrl?((0,s.uX)(),(0,s.CE)("img",{key:0,src:e.imageUrl,alt:"project image",class:"project-image"},null,8,kt)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",bt,[(0,s.Lk)("button",{onClick:e=>r.editProject(a),class:"btn btn-edit"},"Modifier",8,ft),(0,s.Lk)("button",{onClick:t=>r.deleteProject(e.id),class:"btn btn-delete"},"Supprimer",8,gt)])])))),128))])])])}a(116),a(7588);const yt=async e=>{try{await(0,X.gS)((0,X.rJ)(D,"timeline"),{...e,createdAt:new Date})}catch(t){console.error("Error logging timeline action:",t)}};var ht={name:"ProjectsView",setup(){const e=(0,p.KR)(""),t=(0,p.KR)(""),a=(0,p.KR)([]),o=(0,p.KR)(""),l=(0,p.KR)([]),r=(0,p.KR)(-1),i=(0,p.KR)(null),n=(0,p.KR)(""),c=(0,p.KR)(""),u=(0,p.KR)(!1),d=(0,p.KR)(""),v=()=>{a.value.push("")},m=e=>{if(i.value=e.target.files[0],i.value){const e=new FileReader;e.onload=e=>{c.value=e.target.result},e.readAsDataURL(i.value)}else c.value=""},k=()=>{e.value="",t.value="",a.value=[],o.value="",i.value=null,n.value="",c.value="",r.value=-1,d.value=""},b=()=>{k(),u.value=!0},f=()=>{k(),u.value=!1},g=async()=>{if(d.value="",!F.currentUser)return void(d.value="Vous devez être connecté pour ajouter un projet.");let s="";try{if(i.value)try{const e=(0,A.c7)(),t=(0,A.KR)(e,`projects/${F.currentUser.uid}/${Date.now()}_${i.value.name}`),a=await(0,A.D)(t,i.value);s=await(0,A.qk)(a.ref)}catch(l){return console.error("Erreur upload image:",l),void(d.value="Erreur lors de l'upload de l'image. Veuillez réessayer.")}const r={title:e.value,description:t.value,stacks:a.value,github:o.value,imageUrl:s,userId:F.currentUser.uid,createdAt:new Date},n=await(0,X.gS)((0,X.rJ)(D,"projects"),r);console.log("Projet créé avec ID:",n.id),await yt({userId:F.currentUser.uid,type:"Ajout projet",description:`Ajout du projet ${e.value}`}),k(),u.value=!1,await L()}catch(r){console.error("Erreur création projet:",r),d.value="Erreur lors de l'ajout du projet. Veuillez réessayer."}},L=async()=>{if(!F.currentUser)return;l.value=[];const e=(0,X.P)((0,X.rJ)(D,"projects"),(0,X._M)("userId","==",F.currentUser.uid)),t=await(0,X.GG)(e);t.forEach((e=>{l.value.push({id:e.id,...e.data()})}))},y=s=>{r.value=s;const i=l.value[s];e.value=i.title,t.value=i.description,a.value=Array.isArray(i.stacks)?[...i.stacks]:[],o.value=i.github,n.value=i.imageUrl||"",c.value=i.imageUrl||"",u.value=!0},h=async()=>{if(d.value="",-1===r.value)return;let s=n.value;try{if(i.value)try{const e=(0,A.c7)(),t=(0,A.KR)(e,`projects/${F.currentUser.uid}/${Date.now()}_${i.value.name}`),a=await(0,A.D)(t,i.value);s=await(0,A.qk)(a.ref)}catch(c){return console.error("Erreur upload image:",c),void(d.value="Erreur lors de l'upload de l'image. Veuillez réessayer.")}const n=l.value[r.value],p={title:e.value,description:t.value,stacks:a.value,github:o.value,imageUrl:s,updatedAt:new Date};await(0,X.mZ)((0,X.H9)(D,"projects",n.id),p),console.log("Projet mis à jour:",n.id),await yt({userId:F.currentUser.uid,type:"Modification projet",description:`Modification du projet ${e.value}`}),k(),u.value=!1,await L()}catch(p){console.error("Erreur mise à jour projet:",p),d.value="Erreur lors de la mise à jour du projet. Veuillez réessayer."}},C=async e=>{const t=l.value.find((t=>t.id===e));await(0,X.kd)((0,X.H9)(D,"projects",e)),await yt({userId:F.currentUser.uid,type:"Suppression projet",description:`Suppression du projet ${t?t.title:""}`}),L()};return(0,s.sV)((()=>{(0,K.hg)(F,(e=>{e&&L()}))})),{title:e,description:t,stacks:a,github:o,addStack:v,addProject:g,projects:l,editProject:y,updateProject:h,deleteProject:C,editingIndex:r,handleImage:m,imageFile:i,imageUrl:n,imagePreview:c,formVisible:u,showAddForm:b,hideForm:f,error:d}}};const Ct=(0,k.A)(ht,[["render",Lt],["__scopeId","data-v-8bf3a55c"]]);var wt=Ct;const jt={class:"skills-container"},Et={class:"card"},Ut={class:"add-skill-section"},xt={class:"form-group"},Pt={class:"form-group"},_t={class:"form-group"},It={class:"form-group"},Xt={class:"form-group"},Kt={class:"form-group"},At={class:"form-group"},Rt={class:"form-group"},St={class:"skills-grid"},Dt={class:"skill-header"},Ft={class:"skill-actions"},Ot=["onClick"],Vt=["onClick"],Nt={class:"skill-details"},Jt={class:"skill-level"},Wt={class:"skill-dates"},Mt={class:"date-item"},qt={class:"value"},Qt={class:"date-item"},Gt={class:"value"};function $t(e,t,a,r,i,n){return(0,s.uX)(),(0,s.CE)("div",jt,[(0,s.Lk)("div",Et,[t[28]||(t[28]=(0,s.Lk)("h2",{class:"page-title"},"Gestion des Compétences",-1)),(0,s.Lk)("div",Ut,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=e=>r.ajouter()),class:"btn btn-primary"},(0,l.v_)(r.val?"Annuler":"Ajouter une compétence"),1)]),(0,s.bF)(o.eB,{name:"slide-fade"},{default:(0,s.k6)((()=>[r.val&&-1===r.editingIndex?((0,s.uX)(),(0,s.CE)("form",{key:0,onSubmit:t[5]||(t[5]=(0,o.D$)((e=>r.addComp()),["prevent"])),class:"skill-form"},[t[16]||(t[16]=(0,s.Lk)("h3",{class:"form-title"},"Ajouter une nouvelle compétence",-1)),(0,s.Lk)("div",xt,[t[11]||(t[11]=(0,s.Lk)("label",{for:"titre"},"Titre de la compétence",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>r.titre=e),placeholder:"Ex: React, Git, Docker...",required:""},null,512),[[o.Jo,r.titre]])]),(0,s.Lk)("div",Pt,[t[13]||(t[13]=(0,s.Lk)("label",{for:"niveau"},"Niveau",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>r.niveau=e),required:""},t[12]||(t[12]=[(0,s.Lk)("option",{value:""},"Sélectionner un niveau",-1),(0,s.Lk)("option",{value:"Débutant"},"Débutant",-1),(0,s.Lk)("option",{value:"Intermédiaire"},"Intermédiaire",-1),(0,s.Lk)("option",{value:"Avancé"},"Avancé",-1)]),512),[[o.u1,r.niveau]])]),(0,s.Lk)("div",_t,[t[14]||(t[14]=(0,s.Lk)("label",{for:"dateac"},"Date d'acquisition",-1)),(0,s.bo)((0,s.Lk)("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=e=>r.dateac=e),required:""},null,512),[[o.Jo,r.dateac]])]),(0,s.Lk)("div",It,[t[15]||(t[15]=(0,s.Lk)("label",{for:"datepr"},"Date de progression",-1)),(0,s.bo)((0,s.Lk)("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=e=>r.datepr=e),required:""},null,512),[[o.Jo,r.datepr]])]),t[17]||(t[17]=(0,s.Lk)("div",{class:"form-actions"},[(0,s.Lk)("button",{type:"submit",class:"btn btn-submit"},"Ajouter")],-1))],32)):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(o.eB,{name:"slide-fade"},{default:(0,s.k6)((()=>[r.val&&-1!==r.editingIndex?((0,s.uX)(),(0,s.CE)("form",{key:0,onSubmit:t[10]||(t[10]=(0,o.D$)((e=>r.updateComp()),["prevent"])),class:"skill-form"},[t[23]||(t[23]=(0,s.Lk)("h3",{class:"form-title"},"Modifier la compétence",-1)),(0,s.Lk)("div",Xt,[t[18]||(t[18]=(0,s.Lk)("label",{for:"titre"},"Titre de la compétence",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>r.titre=e),placeholder:"Ex: React, Git, Docker...",required:""},null,512),[[o.Jo,r.titre]])]),(0,s.Lk)("div",Kt,[t[20]||(t[20]=(0,s.Lk)("label",{for:"niveau"},"Niveau",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>r.niveau=e),required:""},t[19]||(t[19]=[(0,s.Lk)("option",{value:""},"Sélectionner un niveau",-1),(0,s.Lk)("option",{value:"Débutant"},"Débutant",-1),(0,s.Lk)("option",{value:"Intermédiaire"},"Intermédiaire",-1),(0,s.Lk)("option",{value:"Avancé"},"Avancé",-1)]),512),[[o.u1,r.niveau]])]),(0,s.Lk)("div",At,[t[21]||(t[21]=(0,s.Lk)("label",{for:"dateac"},"Date d'acquisition",-1)),(0,s.bo)((0,s.Lk)("input",{type:"date","onUpdate:modelValue":t[8]||(t[8]=e=>r.dateac=e),required:""},null,512),[[o.Jo,r.dateac]])]),(0,s.Lk)("div",Rt,[t[22]||(t[22]=(0,s.Lk)("label",{for:"datepr"},"Date de progression",-1)),(0,s.bo)((0,s.Lk)("input",{type:"date","onUpdate:modelValue":t[9]||(t[9]=e=>r.datepr=e),required:""},null,512),[[o.Jo,r.datepr]])]),t[24]||(t[24]=(0,s.Lk)("div",{class:"form-actions"},[(0,s.Lk)("button",{type:"submit",class:"btn btn-submit"},"Mettre à jour")],-1))],32)):(0,s.Q3)("",!0)])),_:1}),(0,s.Lk)("div",St,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.listCompetence,((e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"skill-card"},[(0,s.Lk)("div",Dt,[(0,s.Lk)("h3",null,(0,l.v_)(e.titre),1),(0,s.Lk)("div",Ft,[(0,s.Lk)("button",{onClick:e=>r.editComp(a),class:"btn btn-edit"},"Modifier",8,Ot),(0,s.Lk)("button",{onClick:t=>r.deleteComp(e.id),class:"btn btn-delete"},"Supprimer",8,Vt)])]),(0,s.Lk)("div",Nt,[(0,s.Lk)("div",Jt,[t[25]||(t[25]=(0,s.Lk)("span",{class:"label"},"Niveau :",-1)),(0,s.Lk)("span",{class:(0,l.C4)(["value",r.getLevelClass(e.niveau)])},(0,l.v_)(e.niveau),3)]),(0,s.Lk)("div",Wt,[(0,s.Lk)("div",Mt,[t[26]||(t[26]=(0,s.Lk)("span",{class:"label"},"Acquise le :",-1)),(0,s.Lk)("span",qt,(0,l.v_)(r.formatDate(e.date_acquisition)),1)]),(0,s.Lk)("div",Qt,[t[27]||(t[27]=(0,s.Lk)("span",{class:"label"},"Progression le :",-1)),(0,s.Lk)("span",Gt,(0,l.v_)(r.formatDate(e.date_progression)),1)])])])])))),128))])])])}var Tt={name:"SkillsManagement",setup(){const e=(0,p.KR)(""),t=(0,p.KR)(""),a=(0,p.KR)(""),o=(0,p.KR)(""),l=(0,p.KR)(!1),r=(0,p.KR)([]),i=(0,p.KR)(-1),n=()=>{l.value=!l.value,l.value||c()},c=()=>{e.value="",t.value="",a.value="",o.value=""},u=e=>{if(!e)return"";const t=new Date(e);return t.toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})},d=e=>({"level-beginner":"Débutant"===e,"level-intermediate":"Intermédiaire"===e,"level-advanced":"Avancé"===e}),v=async()=>{F.currentUser&&(new Date(o.value)<new Date(a.value)?alert("La date de progression doit être postérieure à la date d'acquisition"):(await(0,X.gS)((0,X.rJ)(D,"Compétence"),{titre:e.value,niveau:t.value,date_acquisition:a.value,date_progression:o.value,userId:F.currentUser.uid}),await yt({userId:F.currentUser.uid,type:"Ajout compétence",description:`Ajout de la compétence ${e.value}`}),c(),l.value=!1,f()))},m=s=>{i.value=s;const n=r.value[s];e.value=n.titre,t.value=n.niveau,a.value=n.date_acquisition,o.value=n.date_progression,l.value=!0,setTimeout((()=>{const e=document.querySelector(".skill-form");e&&e.scrollIntoView({behavior:"smooth"})}),100)},k=async()=>{if(-1===i.value)return;if(new Date(o.value)<new Date(a.value))return void alert("La date de progression doit être postérieure à la date d'acquisition");const s=r.value[i.value];await(0,X.mZ)((0,X.H9)(D,"Compétence",s.id),{titre:e.value,niveau:t.value,date_acquisition:a.value,date_progression:o.value}),await yt({userId:F.currentUser.uid,type:"Modification compétence",description:`Modification de la compétence ${e.value}`}),c(),l.value=!1,f()},b=async e=>{if(!confirm("Êtes-vous sûr de vouloir supprimer cette compétence ?"))return;const t=r.value.find((t=>t.id===e));await(0,X.kd)((0,X.H9)(D,"Compétence",e)),await yt({userId:F.currentUser.uid,type:"Suppression compétence",description:`Suppression de la compétence ${t?t.titre:""}`}),f()},f=async()=>{if(!F.currentUser)return;r.value=[];const e=(0,X.P)((0,X.rJ)(D,"Compétence"),(0,X._M)("userId","==",F.currentUser.uid)),t=await(0,X.GG)(e);t.forEach((e=>{r.value.push({id:e.id,...e.data()})}))};return(0,s.sV)((()=>{(0,K.hg)(F,(e=>{e&&f()}))})),{titre:e,niveau:t,dateac:a,datepr:o,ajouter:n,addComp:v,val:l,listCompetence:r,editComp:m,updateComp:k,deleteComp:b,editingIndex:i,formatDate:u,getLevelClass:d}}};const Ht=(0,k.A)(Tt,[["render",$t],["__scopeId","data-v-3a245384"]]);var Bt=Ht;const zt={class:"timeline-container"},Zt={key:0,class:"text-center py-4"},Yt={key:1,class:"text-center py-4"},ea={key:2,class:"posts-list"};function ta(e,t,a,o,l,r){const i=(0,s.g2)("CreatePost"),n=(0,s.g2)("PostCard");return(0,s.uX)(),(0,s.CE)("div",zt,[(0,s.bF)(i,{projects:o.projects,objectives:o.objectives,competitions:o.competitions,onCreateProject:o.createNewProject,onCreateObjective:o.createNewObjective,onCreateCompetition:o.createNewCompetition},null,8,["projects","objectives","competitions","onCreateProject","onCreateObjective","onCreateCompetition"]),o.loading?((0,s.uX)(),(0,s.CE)("div",Zt,t[0]||(t[0]=[(0,s.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,s.Lk)("span",{class:"visually-hidden"},"Loading...")],-1)]))):0===o.posts.length?((0,s.uX)(),(0,s.CE)("div",Yt,t[1]||(t[1]=[(0,s.Lk)("p",{class:"text-muted"},"No posts yet. Follow some users to see their posts here!",-1)]))):((0,s.uX)(),(0,s.CE)("div",ea,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.posts,(e=>((0,s.uX)(),(0,s.Wv)(n,{key:e.id,post:e,onPostUpdated:o.loadPosts},null,8,["post","onPostUpdated"])))),128))]))])}const aa={class:"card mb-4"},oa={class:"card-body"},sa={class:"mb-3"},la={class:"d-flex align-items-center mb-2"},ra={class:"btn-group"},ia={key:0,class:"mb-3"},na={class:"input-group"},ca={key:0,class:"list-group mt-2"},ua=["onClick"],da={key:1,class:"mb-3"},pa={class:"input-group"},va={key:0,class:"list-group mt-2"},ma=["onClick"],ka={key:2,class:"mb-3"},ba={class:"input-group"},fa={key:0,class:"list-group mt-2"},ga=["onClick"],La={class:"d-flex align-items-center"},ya=["src"],ha={key:0,class:"mb-3"},Ca={key:0,class:"badge bg-info me-2 mb-2"},wa={key:1,class:"badge bg-success me-2 mb-2"},ja={key:2,class:"badge bg-warning text-dark me-2 mb-2"},Ea=["disabled"];function Ua(e,t,a,r,i,n){return(0,s.uX)(),(0,s.CE)("div",aa,[(0,s.Lk)("div",oa,[(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.content=e),placeholder:"What's on your mind?",class:"form-control mb-3",rows:"3"},null,512),[[o.Jo,r.content]]),(0,s.Lk)("div",sa,[(0,s.Lk)("div",la,[t[22]||(t[22]=(0,s.Lk)("label",{class:"me-2 mb-0"},"Add to post:",-1)),(0,s.Lk)("div",ra,[(0,s.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>r.toggleProjectSelect&&r.toggleProjectSelect(...e)),class:(0,l.C4)(["btn btn-outline-secondary",{active:r.showProjectSelect}])},t[19]||(t[19]=[(0,s.Lk)("i",{class:"fas fa-project-diagram"},null,-1),(0,s.eW)(" Project ")]),2),(0,s.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>r.toggleObjectiveSelect&&r.toggleObjectiveSelect(...e)),class:(0,l.C4)(["btn btn-outline-secondary",{active:r.showObjectiveSelect}])},t[20]||(t[20]=[(0,s.Lk)("i",{class:"fas fa-bullseye"},null,-1),(0,s.eW)(" Objective ")]),2),(0,s.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>r.toggleCompetitionSelect&&r.toggleCompetitionSelect(...e)),class:(0,l.C4)(["btn btn-outline-secondary",{active:r.showCompetitionSelect}])},t[21]||(t[21]=[(0,s.Lk)("i",{class:"fas fa-trophy"},null,-1),(0,s.eW)(" Competition ")]),2)])]),r.showProjectSelect?((0,s.uX)(),(0,s.CE)("div",ia,[(0,s.Lk)("div",na,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>r.projectSearch=e),type:"text",class:"form-control",placeholder:"Search projects...",onInput:t[5]||(t[5]=(...t)=>e.filterProjects&&e.filterProjects(...t))},null,544),[[o.Jo,r.projectSearch]]),(0,s.Lk)("button",{class:"btn btn-outline-secondary",type:"button",onClick:t[6]||(t[6]=(...e)=>r.createNewProject&&r.createNewProject(...e))},t[23]||(t[23]=[(0,s.Lk)("i",{class:"fas fa-plus"},null,-1),(0,s.eW)(" New ")]))]),r.filteredProjects.length>0?((0,s.uX)(),(0,s.CE)("div",ca,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.filteredProjects,(e=>((0,s.uX)(),(0,s.CE)("button",{key:e.id,class:"list-group-item list-group-item-action",onClick:t=>r.selectProject(e)},(0,l.v_)(e.title),9,ua)))),128))])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),r.showObjectiveSelect?((0,s.uX)(),(0,s.CE)("div",da,[(0,s.Lk)("div",pa,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>r.objectiveSearch=e),type:"text",class:"form-control",placeholder:"Search objectives...",onInput:t[8]||(t[8]=(...t)=>e.filterObjectives&&e.filterObjectives(...t))},null,544),[[o.Jo,r.objectiveSearch]]),(0,s.Lk)("button",{class:"btn btn-outline-secondary",type:"button",onClick:t[9]||(t[9]=(...e)=>r.createNewObjective&&r.createNewObjective(...e))},t[24]||(t[24]=[(0,s.Lk)("i",{class:"fas fa-plus"},null,-1),(0,s.eW)(" New ")]))]),r.filteredObjectives.length>0?((0,s.uX)(),(0,s.CE)("div",va,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.filteredObjectives,(e=>((0,s.uX)(),(0,s.CE)("button",{key:e.id,class:"list-group-item list-group-item-action",onClick:t=>r.selectObjective(e)},(0,l.v_)(e.title),9,ma)))),128))])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),r.showCompetitionSelect?((0,s.uX)(),(0,s.CE)("div",ka,[(0,s.Lk)("div",ba,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>r.competitionSearch=e),type:"text",class:"form-control",placeholder:"Search competitions...",onInput:t[11]||(t[11]=(...t)=>e.filterCompetitions&&e.filterCompetitions(...t))},null,544),[[o.Jo,r.competitionSearch]]),(0,s.Lk)("button",{class:"btn btn-outline-secondary",type:"button",onClick:t[12]||(t[12]=(...e)=>r.createNewCompetition&&r.createNewCompetition(...e))},t[25]||(t[25]=[(0,s.Lk)("i",{class:"fas fa-plus"},null,-1),(0,s.eW)(" New ")]))]),r.filteredCompetitions.length>0?((0,s.uX)(),(0,s.CE)("div",fa,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.filteredCompetitions,(e=>((0,s.uX)(),(0,s.CE)("button",{key:e.id,class:"list-group-item list-group-item-action",onClick:t=>r.selectCompetition(e)},(0,l.v_)(e.title),9,ga)))),128))])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),(0,s.Lk)("div",La,[(0,s.Lk)("input",{type:"file",ref:"fileInput",onChange:t[13]||(t[13]=(...e)=>r.handleImageUpload&&r.handleImageUpload(...e)),accept:"image/*",class:"d-none"},null,544),(0,s.Lk)("button",{onClick:t[14]||(t[14]=t=>e.$refs.fileInput.click()),class:"btn btn-outline-secondary me-3"},t[26]||(t[26]=[(0,s.Lk)("i",{class:"fas fa-image"},null,-1),(0,s.eW)(" Add Image ")])),r.imagePreview?((0,s.uX)(),(0,s.CE)("img",{key:0,src:r.imagePreview,class:"img-thumbnail",style:{"max-width":"100px","max-height":"100px"}},null,8,ya)):(0,s.Q3)("",!0)])]),r.hasSelectedItems?((0,s.uX)(),(0,s.CE)("div",ha,[r.selectedProject?((0,s.uX)(),(0,s.CE)("div",Ca,[(0,s.eW)(" Project: "+(0,l.v_)(r.selectedProject.title)+" ",1),(0,s.Lk)("button",{onClick:t[15]||(t[15]=e=>r.selectedProject=null),class:"btn-close btn-close-white ms-2",style:{"font-size":"0.5rem"}})])):(0,s.Q3)("",!0),r.selectedObjective?((0,s.uX)(),(0,s.CE)("div",wa,[(0,s.eW)(" Objective: "+(0,l.v_)(r.selectedObjective.title)+" ",1),(0,s.Lk)("button",{onClick:t[16]||(t[16]=e=>r.selectedObjective=null),class:"btn-close btn-close-white ms-2",style:{"font-size":"0.5rem"}})])):(0,s.Q3)("",!0),r.selectedCompetition?((0,s.uX)(),(0,s.CE)("div",ja,[(0,s.eW)(" Competition: "+(0,l.v_)(r.selectedCompetition.title)+" ",1),(0,s.Lk)("button",{onClick:t[17]||(t[17]=e=>r.selectedCompetition=null),class:"btn-close btn-close-white ms-2",style:{"font-size":"0.5rem"}})])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),(0,s.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>r.createPost&&r.createPost(...e)),class:"btn btn-primary w-100",disabled:!r.canSubmit}," Post ",8,Ea)])])}var xa={name:"CreatePost",props:{projects:{type:Array,default:()=>[]},objectives:{type:Array,default:()=>[]},competitions:{type:Array,default:()=>[]}},emits:["create-project","create-objective","create-competition","post-created"],setup(e,{emit:t}){const a=(0,p.KR)(""),o=(0,p.KR)(null),l=(0,p.KR)(null),r=(0,p.KR)(!1),i=(0,p.KR)(!1),n=(0,p.KR)(!1),c=(0,p.KR)(null),u=(0,p.KR)(null),d=(0,p.KR)(null),v=(0,p.KR)(""),m=(0,p.KR)(""),k=(0,p.KR)(""),b=(0,s.EW)((()=>v.value?e.projects.filter((e=>e.title.toLowerCase().includes(v.value.toLowerCase()))):e.projects)),f=(0,s.EW)((()=>m.value?e.objectives.filter((e=>e.title.toLowerCase().includes(m.value.toLowerCase()))):e.objectives)),g=(0,s.EW)((()=>k.value?e.competitions.filter((e=>e.title.toLowerCase().includes(k.value.toLowerCase()))):e.competitions)),L=(0,s.EW)((()=>c.value||u.value||d.value)),y=(0,s.EW)((()=>a.value.trim()||o.value||L.value)),h=()=>{r.value=!r.value,i.value=!1,n.value=!1},C=()=>{i.value=!i.value,r.value=!1,n.value=!1},w=()=>{n.value=!n.value,r.value=!1,i.value=!1},j=e=>{c.value=e,r.value=!1,v.value=""},E=e=>{u.value=e,i.value=!1,m.value=""},U=e=>{d.value=e,n.value=!1,k.value=""},x=()=>{t("create-project"),r.value=!1},P=()=>{t("create-objective"),i.value=!1},_=()=>{t("create-competition"),n.value=!1},I=e=>{const t=e.target.files[0];if(t){o.value=t;const e=new FileReader;e.onload=e=>{l.value=e.target.result},e.readAsDataURL(t)}},X=async()=>{if(!o.value)return null;const e=(0,A.KR)(O,`posts/${Date.now()}_${o.value.name}`);return await(0,A.D)(e,o.value),(0,A.qk)(e)},K=async()=>{if(F.currentUser)try{let e=null;o.value&&(e=await X());const s={content:a.value,image:e,authorId:F.currentUser.uid,authorName:F.currentUser.displayName,authorAvatar:F.currentUser.photoURL,project:c.value,objective:u.value,competition:d.value,createdAt:new Date};await $(s),t("post-created"),a.value="",o.value=null,l.value=null,c.value=null,u.value=null,d.value=null,r.value=!1,i.value=!1,n.value=!1}catch(e){console.error("Error creating post:",e)}};return{content:a,imagePreview:l,showProjectSelect:r,showObjectiveSelect:i,showCompetitionSelect:n,selectedProject:c,selectedObjective:u,selectedCompetition:d,projectSearch:v,objectiveSearch:m,competitionSearch:k,filteredProjects:b,filteredObjectives:f,filteredCompetitions:g,hasSelectedItems:L,canSubmit:y,toggleProjectSelect:h,toggleObjectiveSelect:C,toggleCompetitionSelect:w,selectProject:j,selectObjective:E,selectCompetition:U,createNewProject:x,createNewObjective:P,createNewCompetition:_,handleImageUpload:I,createPost:K}}};const Pa=(0,k.A)(xa,[["render",Ua],["__scopeId","data-v-198d30fb"]]);var _a=Pa,Ia={name:"TimelineFeed",components:{CreatePost:_a,PostCard:Ue},setup(){const e=(0,v.rd)(),t=(0,p.KR)([]),a=(0,p.KR)([]),o=(0,p.KR)([]),l=(0,p.KR)([]),r=(0,p.KR)(!0),i=async()=>{if(F.currentUser)try{r.value=!0,t.value=await T(F.currentUser.uid)}catch(e){console.error("Error loading posts:",e)}finally{r.value=!1}},n=async()=>{try{a.value=await B()}catch(e){console.error("Error loading projects:",e)}},c=async()=>{try{o.value=await z()}catch(e){console.error("Error loading objectives:",e)}},u=async()=>{try{l.value=await Z()}catch(e){console.error("Error loading competitions:",e)}},d=()=>{e.push("/projects")},m=()=>{e.push("/objectives")},k=()=>{e.push("/competitions")};return(0,s.sV)((async()=>{await Promise.all([i(),n(),c(),u()])})),{posts:t,projects:a,objectives:o,competitions:l,loading:r,loadPosts:i,createNewProject:d,createNewObjective:m,createNewCompetition:k}}};const Xa=(0,k.A)(Ia,[["render",ta],["__scopeId","data-v-24ec3797"]]);var Ka=Xa;const Aa={class:"objectives-container"},Ra={class:"card objectives-card"},Sa={class:"add-objective-section"},Da={key:0},Fa={class:"cancel-section"},Oa={class:"form-group"},Va={class:"form-group"},Na={class:"form-group"},Ja={key:0},Wa={class:"cancel-section"},Ma={class:"form-group"},qa={class:"form-group"},Qa={class:"form-group"},Ga={class:"objectives-list"},$a={class:"objective-title"},Ta={class:"objective-desc"},Ha={class:"objective-status"},Ba=["onClick"],za=["onClick"];function Za(e,t,a,r,i,n){return(0,s.uX)(),(0,s.CE)("div",Aa,[(0,s.Lk)("div",Ra,[t[24]||(t[24]=(0,s.Lk)("h2",{class:"page-title"},"Mes Objectifs",-1)),(0,s.Lk)("div",Sa,[r.formVisible?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:t[0]||(t[0]=(...e)=>r.showAddForm&&r.showAddForm(...e)),class:"btn btn-primary"},"Ajouter un objectif"))]),(0,s.bF)(o.eB,{name:"slide-fade"},{default:(0,s.k6)((()=>[r.formVisible&&-1===r.editingIndex?((0,s.uX)(),(0,s.CE)("div",Da,[(0,s.Lk)("div",Fa,[(0,s.Lk)("button",{type:"button",onClick:t[1]||(t[1]=(...e)=>r.hideForm&&r.hideForm(...e)),class:"btn btn-cancel"},"Annuler")]),(0,s.Lk)("form",{onSubmit:t[5]||(t[5]=(0,o.D$)(((...e)=>r.addObjective&&r.addObjective(...e)),["prevent"])),class:"objective-form"},[t[15]||(t[15]=(0,s.Lk)("h3",{class:"form-title"},"Ajouter un objectif",-1)),(0,s.Lk)("div",Oa,[t[11]||(t[11]=(0,s.Lk)("label",{for:"title"},"Titre",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>r.title=e),placeholder:"Titre de l'objectif",required:""},null,512),[[o.Jo,r.title]])]),(0,s.Lk)("div",Va,[t[12]||(t[12]=(0,s.Lk)("label",{for:"description"},"Description",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>r.description=e),placeholder:"Description",required:""},null,512),[[o.Jo,r.description]])]),(0,s.Lk)("div",Na,[t[14]||(t[14]=(0,s.Lk)("label",{for:"status"},"Statut",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>r.status=e)},t[13]||(t[13]=[(0,s.Lk)("option",{value:"En cours"},"En cours",-1),(0,s.Lk)("option",{value:"Terminé"},"Terminé",-1)]),512),[[o.u1,r.status]])]),t[16]||(t[16]=(0,s.Lk)("div",{class:"form-actions"},[(0,s.Lk)("button",{type:"submit",class:"btn btn-submit"},"Ajouter")],-1))],32)])):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(o.eB,{name:"slide-fade"},{default:(0,s.k6)((()=>[r.formVisible&&-1!==r.editingIndex?((0,s.uX)(),(0,s.CE)("div",Ja,[(0,s.Lk)("div",Wa,[(0,s.Lk)("button",{type:"button",onClick:t[6]||(t[6]=(...e)=>r.hideForm&&r.hideForm(...e)),class:"btn btn-cancel"},"Annuler")]),(0,s.Lk)("form",{onSubmit:t[10]||(t[10]=(0,o.D$)(((...e)=>r.updateObjective&&r.updateObjective(...e)),["prevent"])),class:"objective-form"},[t[21]||(t[21]=(0,s.Lk)("h3",{class:"form-title"},"Modifier l'objectif",-1)),(0,s.Lk)("div",Ma,[t[17]||(t[17]=(0,s.Lk)("label",{for:"title"},"Titre",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>r.title=e),placeholder:"Titre de l'objectif",required:""},null,512),[[o.Jo,r.title]])]),(0,s.Lk)("div",qa,[t[18]||(t[18]=(0,s.Lk)("label",{for:"description"},"Description",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>r.description=e),placeholder:"Description",required:""},null,512),[[o.Jo,r.description]])]),(0,s.Lk)("div",Qa,[t[20]||(t[20]=(0,s.Lk)("label",{for:"status"},"Statut",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>r.status=e)},t[19]||(t[19]=[(0,s.Lk)("option",{value:"En cours"},"En cours",-1),(0,s.Lk)("option",{value:"Terminé"},"Terminé",-1)]),512),[[o.u1,r.status]])]),t[22]||(t[22]=(0,s.Lk)("div",{class:"form-actions"},[(0,s.Lk)("button",{type:"submit",class:"btn btn-submit"},"Mettre à jour")],-1))],32)])):(0,s.Q3)("",!0)])),_:1}),(0,s.Lk)("ul",Ga,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.objectives,((e,a)=>((0,s.uX)(),(0,s.CE)("li",{key:e.id,class:"objective-item"},[(0,s.Lk)("span",$a,(0,l.v_)(e.title),1),t[23]||(t[23]=(0,s.eW)(" - ")),(0,s.Lk)("span",Ta,(0,l.v_)(e.description),1),(0,s.Lk)("span",Ha,"("+(0,l.v_)(e.status)+")",1),(0,s.Lk)("button",{onClick:e=>r.editObjective(a),class:"btn btn-edit"},"Modifier",8,Ba),(0,s.Lk)("button",{onClick:t=>r.deleteObjective(e.id),class:"btn btn-delete"},"Supprimer",8,za)])))),128))])])])}var Ya={name:"UserObjectives",setup(){const e=(0,p.KR)([]),t=(0,p.KR)(""),a=(0,p.KR)(""),o=(0,p.KR)("En cours"),l=(0,p.KR)(-1),r=(0,p.KR)(!1),i=(0,p.KR)(""),n=async t=>{e.value=[];const a=(0,X.P)((0,X.rJ)(D,"objectives"),(0,X._M)("userId","==",t)),o=await(0,X.GG)(a);o.forEach((t=>e.value.push({id:t.id,...t.data()})))},c=()=>{t.value="",a.value="",o.value="En cours",l.value=-1,i.value=""},u=()=>{c(),r.value=!0},d=()=>{c(),r.value=!1},v=async()=>{if(i.value="",F.currentUser)try{const e={title:t.value,description:a.value,status:o.value,userId:F.currentUser.uid,createdAt:new Date},s=await(0,X.gS)((0,X.rJ)(D,"objectives"),e);console.log("Objectif créé avec ID:",s.id),await yt({userId:F.currentUser.uid,type:"Ajout objectif",description:`Ajout de l'objectif ${t.value}`}),c(),r.value=!1,await n(F.currentUser.uid)}catch(e){console.error("Erreur création objectif:",e),i.value="Erreur lors de l'ajout de l'objectif. Veuillez réessayer."}else i.value="Vous devez être connecté pour ajouter un objectif."},m=s=>{l.value=s;const i=e.value[s];t.value=i.title,a.value=i.description,o.value=i.status,r.value=!0},k=async()=>{if(i.value="",-1!==l.value)try{const s=e.value[l.value],i={title:t.value,description:a.value,status:o.value,updatedAt:new Date};await(0,X.mZ)((0,X.H9)(D,"objectives",s.id),i),console.log("Objectif mis à jour:",s.id),await yt({userId:F.currentUser.uid,type:"Modification objectif",description:`Modification de l'objectif ${t.value}`}),c(),r.value=!1,await n(F.currentUser.uid)}catch(s){console.error("Erreur mise à jour objectif:",s),i.value="Erreur lors de la mise à jour de l'objectif. Veuillez réessayer."}},b=async t=>{const a=e.value.find((e=>e.id===t));await(0,X.kd)((0,X.H9)(D,"objectives",t)),await yt({userId:F.currentUser.uid,type:"Suppression objectif",description:`Suppression de l'objectif ${a?a.title:""}`}),n(F.currentUser.uid)};return(0,s.sV)((()=>{(0,K.hg)(F,(e=>{e&&n(e.uid)}))})),{objectives:e,title:t,description:a,status:o,addObjective:v,editObjective:m,updateObjective:k,deleteObjective:b,editingIndex:l,formVisible:r,showAddForm:u,hideForm:d,error:i}}};const eo=(0,k.A)(Ya,[["render",Za],["__scopeId","data-v-8a491450"]]);var to=eo;const ao={class:"card profile-card"},oo={class:"profile-header"},so={class:"profile-avatar"},lo={class:"profile-info"},ro={class:"profile-email"},io={class:"profile-section"},no={class:"profile-list"},co={class:"profile-section"},uo={class:"profile-list"};function po(e,t,a,o,r,i){return(0,s.uX)(),(0,s.CE)("div",ao,[(0,s.Lk)("div",oo,[(0,s.Lk)("div",so,[(0,s.Lk)("span",null,(0,l.v_)(o.userInitials),1)]),(0,s.Lk)("div",lo,[(0,s.Lk)("h2",null,(0,l.v_)(o.user&&o.user.displayName||o.user&&o.user.email||"Profil"),1),(0,s.Lk)("p",ro,(0,l.v_)(o.user&&o.user.email),1)])]),(0,s.Lk)("div",io,[t[0]||(t[0]=(0,s.Lk)("h3",null,"Compétences",-1)),(0,s.Lk)("ul",no,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.skills,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},[(0,s.Lk)("strong",null,(0,l.v_)(e.titre),1),(0,s.eW)(" — "+(0,l.v_)(e.niveau),1)])))),128))])]),(0,s.Lk)("div",co,[t[1]||(t[1]=(0,s.Lk)("h3",null,"Projets",-1)),(0,s.Lk)("ul",uo,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.projects,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},[(0,s.Lk)("strong",null,(0,l.v_)(e.title),1),(0,s.eW)(" — "+(0,l.v_)(e.description),1)])))),128))])])])}var vo={name:"ProfileView",setup(){const e=(0,p.KR)(null),t=(0,p.KR)([]),a=(0,p.KR)([]),o=async e=>{t.value=[];const a=(0,X.P)((0,X.rJ)(D,"Compétence"),(0,X._M)("userId","==",e)),o=await(0,X.GG)(a);o.forEach((e=>t.value.push(e.data())))},l=async e=>{a.value=[];const t=(0,X.P)((0,X.rJ)(D,"projects"),(0,X._M)("userId","==",e)),o=await(0,X.GG)(t);o.forEach((e=>a.value.push(e.data())))},r=(0,s.EW)((()=>e.value?e.value.displayName?e.value.displayName.split(" ").map((e=>e[0])).join("").toUpperCase():e.value.email?e.value.email[0].toUpperCase():"":""));return(0,s.sV)((()=>{(0,K.hg)(F,(t=>{e.value=t,t&&(o(t.uid),l(t.uid))}))})),{user:e,skills:t,projects:a,userInitials:r}}};const mo=(0,k.A)(vo,[["render",po],["__scopeId","data-v-4aacfe69"]]);var ko=mo;a(3579);const bo={key:0,class:"text-center py-4"},fo={key:1},go={class:"container py-4"},Lo={class:"row"},yo={class:"col-md-4"},ho={class:"card mb-4"},Co={class:"card-body text-center"},wo=["src"],jo={class:"card-title"},Eo={class:"text-muted"},Uo={class:"d-flex justify-content-center gap-2 mb-3"},xo={class:"d-flex justify-content-around"},Po={class:"text-center"},_o={class:"mb-0"},Io={class:"text-center"},Xo={class:"mb-0"},Ko={class:"col-md-8"},Ao={class:"card"},Ro={class:"card-body"},So={class:"nav nav-tabs mb-3"},Do={class:"nav-item"},Fo={class:"nav-item"},Oo={class:"nav-item"},Vo={key:0,class:"text-center py-4"},No={key:1,class:"text-center py-4"},Jo={key:0,class:"text-center py-4"},Wo={key:1,class:"text-center py-4"},Mo={key:2,class:"list-group"},qo={class:"d-flex align-items-center"},Qo=["src"],Go={class:"mb-0"},$o={class:"text-muted"},To=["onClick"],Ho={key:0,class:"text-center py-4"},Bo={key:1,class:"text-center py-4"},zo={key:2,class:"list-group"},Zo={class:"d-flex align-items-center"},Yo=["src"],es={class:"mb-0"},ts={class:"text-muted"},as=["onClick"],os={key:2,class:"text-center text-danger py-5"};var ss={__name:"UserProfile",setup(e){const t=(0,v.lq)(),a=(0,p.KR)(null),o=(0,p.KR)(!0),r=(0,p.KR)([]),i=(0,p.KR)([]),n=(0,p.KR)([]),c=(0,p.KR)("posts"),u=(0,s.EW)((()=>F.currentUser&&a.value&&F.currentUser.uid===a.value.uid)),d=()=>r.value.some((e=>e.id===F.currentUser?.uid)),m=e=>i.value.some((t=>t.id===e.id)),k=async()=>{if(F.currentUser&&a.value)try{d()?await q(F.currentUser.uid,a.value.uid):await M(F.currentUser.uid,a.value.uid),await f(),await g()}catch(e){console.error("Error toggling follow:",e)}},b=async e=>{if(F.currentUser&&e)try{m(e)?await q(F.currentUser.uid,e.id):await M(F.currentUser.uid,e.id),await f(),await g()}catch(t){console.error("Error toggling follow:",t)}},f=async()=>{if(a.value)try{r.value=await Q(a.value.uid)}catch(e){console.error("Error loading followers:",e)}},g=async()=>{if(a.value)try{i.value=await G(a.value.uid)}catch(e){console.error("Error loading following:",e)}},L=async()=>{if(a.value)try{o.value=!0,n.value=await H(a.value.uid)}catch(e){console.error("Error loading user posts:",e)}finally{o.value=!1}};return(0,s.sV)((async()=>{const e=t.params.id;if(console.log("Querying userId for profile:",e),e){const t=await(0,X.x7)((0,X.H9)(D,"users",e));t.exists()&&(a.value={id:t.id,...t.data()},await Promise.all([f(),g(),L()]))}o.value=!1})),(e,t)=>((0,s.uX)(),(0,s.CE)("div",null,[o.value?((0,s.uX)(),(0,s.CE)("div",bo,t[3]||(t[3]=[(0,s.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,s.Lk)("span",{class:"visually-hidden"},"Loading...")],-1)]))):a.value?((0,s.uX)(),(0,s.CE)("div",fo,[(0,s.Lk)("div",go,[(0,s.Lk)("div",Lo,[(0,s.Lk)("div",yo,[(0,s.Lk)("div",ho,[(0,s.Lk)("div",Co,[(0,s.Lk)("img",{src:a.value.avatar,alt:"Profile",class:"rounded-circle mb-3",style:{width:"150px",height:"150px","object-fit":"cover"}},null,8,wo),(0,s.Lk)("h3",jo,(0,l.v_)(a.value.name),1),(0,s.Lk)("p",Eo,(0,l.v_)(a.value.bio),1),(0,s.Lk)("div",Uo,[u.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:k,class:(0,l.C4)(["btn",d()?"btn-outline-secondary":"btn-primary"])},(0,l.v_)(d()?"Unfollow":"Follow"),3)),t[4]||(t[4]=(0,s.Lk)("button",{class:"btn btn-outline-primary"},[(0,s.Lk)("i",{class:"fas fa-envelope"}),(0,s.eW)(" Message ")],-1))]),(0,s.Lk)("div",xo,[(0,s.Lk)("div",Po,[(0,s.Lk)("h5",_o,(0,l.v_)(r.value?r.value.length:0),1),t[5]||(t[5]=(0,s.Lk)("small",{class:"text-muted"},"Followers",-1))]),(0,s.Lk)("div",Io,[(0,s.Lk)("h5",Xo,(0,l.v_)(i.value?i.value.length:0),1),t[6]||(t[6]=(0,s.Lk)("small",{class:"text-muted"},"Following",-1))])])])])]),(0,s.Lk)("div",Ko,[(0,s.Lk)("div",Ao,[(0,s.Lk)("div",Ro,[(0,s.Lk)("ul",So,[(0,s.Lk)("li",Do,[(0,s.Lk)("a",{class:(0,l.C4)(["nav-link",{active:"posts"===c.value}]),onClick:t[0]||(t[0]=e=>c.value="posts"),href:"#"}," Posts ",2)]),(0,s.Lk)("li",Fo,[(0,s.Lk)("a",{class:(0,l.C4)(["nav-link",{active:"followers"===c.value}]),onClick:t[1]||(t[1]=e=>c.value="followers"),href:"#"}," Followers ("+(0,l.v_)(r.value?r.value.length:0)+") ",3)]),(0,s.Lk)("li",Oo,[(0,s.Lk)("a",{class:(0,l.C4)(["nav-link",{active:"following"===c.value}]),onClick:t[2]||(t[2]=e=>c.value="following"),href:"#"}," Following ("+(0,l.v_)(i.value?i.value.length:0)+") ",3)])]),"posts"===c.value?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[o.value?((0,s.uX)(),(0,s.CE)("div",Vo,t[7]||(t[7]=[(0,s.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,s.Lk)("span",{class:"visually-hidden"},"Loading...")],-1)]))):0===n.value.length?((0,s.uX)(),(0,s.CE)("div",No,t[8]||(t[8]=[(0,s.Lk)("p",{class:"text-muted"},"No posts yet",-1)]))):((0,s.uX)(!0),(0,s.CE)(s.FK,{key:2},(0,s.pI)(n.value,(e=>((0,s.uX)(),(0,s.Wv)(Ue,{key:e.id,post:e},null,8,["post"])))),128))],64)):"followers"===c.value?((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[o.value?((0,s.uX)(),(0,s.CE)("div",Jo,t[9]||(t[9]=[(0,s.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,s.Lk)("span",{class:"visually-hidden"},"Loading...")],-1)]))):r.value&&0===r.value.length?((0,s.uX)(),(0,s.CE)("div",Wo,t[10]||(t[10]=[(0,s.Lk)("p",{class:"text-muted"},"No followers yet",-1)]))):((0,s.uX)(),(0,s.CE)("div",Mo,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.value,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"list-group-item d-flex align-items-center justify-content-between"},[(0,s.Lk)("div",qo,[(0,s.Lk)("img",{src:e.avatar,alt:"Follower",class:"rounded-circle me-3",style:{width:"40px",height:"40px"}},null,8,Qo),(0,s.Lk)("div",null,[(0,s.Lk)("h6",Go,(0,l.v_)(e.name),1),(0,s.Lk)("small",$o,(0,l.v_)(e.bio),1)])]),(0,p.R1)(F).currentUser&&e.id!==(0,p.R1)(F).currentUser.uid?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:t=>b(e),class:(0,l.C4)(["btn btn-sm",m(e)?"btn-outline-secondary":"btn-primary"])},(0,l.v_)(m(e)?"Unfollow":"Follow"),11,To)):(0,s.Q3)("",!0)])))),128))]))],64)):"following"===c.value?((0,s.uX)(),(0,s.CE)(s.FK,{key:2},[o.value?((0,s.uX)(),(0,s.CE)("div",Ho,t[11]||(t[11]=[(0,s.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,s.Lk)("span",{class:"visually-hidden"},"Loading...")],-1)]))):i.value&&0===i.value.length?((0,s.uX)(),(0,s.CE)("div",Bo,t[12]||(t[12]=[(0,s.Lk)("p",{class:"text-muted"},"Not following anyone yet",-1)]))):((0,s.uX)(),(0,s.CE)("div",zo,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"list-group-item d-flex align-items-center justify-content-between"},[(0,s.Lk)("div",Zo,[(0,s.Lk)("img",{src:e.avatar,alt:"Following",class:"rounded-circle me-3",style:{width:"40px",height:"40px"}},null,8,Yo),(0,s.Lk)("div",null,[(0,s.Lk)("h6",es,(0,l.v_)(e.name),1),(0,s.Lk)("small",ts,(0,l.v_)(e.bio),1)])]),(0,p.R1)(F).currentUser&&e.id!==(0,p.R1)(F).currentUser.uid?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:t=>b(e),class:(0,l.C4)(["btn btn-sm",m(e)?"btn-outline-secondary":"btn-primary"])},(0,l.v_)(m(e)?"Unfollow":"Follow"),11,as)):(0,s.Q3)("",!0)])))),128))]))],64)):(0,s.Q3)("",!0)])])])])])])):((0,s.uX)(),(0,s.CE)("div",os," User not found. "))]))}};const ls=(0,k.A)(ss,[["__scopeId","data-v-074d9f35"]]);var rs=ls;const is=[{path:"/",name:"home",component:_e},{path:"/signUp",name:"signup",component:Ve},{path:"/Login",name:"login",component:He},{path:"/AddProject",name:"addproject",component:wt},{path:"/GestComp",name:"GestComp",component:Bt},{path:"/timeline",name:"timeline",component:Ka},{path:"/objectives",name:"objectives",component:to},{path:"/dashboard",name:"dashboard",component:ko},{path:"/profile/:userId",name:"UserProfile",component:rs,props:!0}],ns=(0,v.aE)({history:(0,v.LA)("/"),routes:is});ns.beforeEach(((e,t,a)=>{const o=["/","/Login","/signUp"],s=!o.includes(e.path),l=localStorage.getItem("user");if(s&&!l)return a("/Login");a()}));var cs=ns;a(323);(0,o.Ef)(f).use(cs).mount("#app")}},t={};function a(o){var s=t[o];if(void 0!==s)return s.exports;var l=t[o]={exports:{}};return e[o].call(l.exports,l,l.exports,a),l.exports}a.m=e,function(){var e=[];a.O=function(t,o,s,l){if(!o){var r=1/0;for(u=0;u<e.length;u++){o=e[u][0],s=e[u][1],l=e[u][2];for(var i=!0,n=0;n<o.length;n++)(!1&l||r>=l)&&Object.keys(a.O).every((function(e){return a.O[e](o[n])}))?o.splice(n--,1):(i=!1,l<r&&(r=l));if(i){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[o,s,l]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.p="/"}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,l,r=o[0],i=o[1],n=o[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(s in i)a.o(i,s)&&(a.m[s]=i[s]);if(n)var u=n(a)}for(t&&t(o);c<r.length;c++)l=r[c],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(u)},o=self["webpackChunkdevgate_project"]=self["webpackChunkdevgate_project"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[504],(function(){return a(5448)}));o=a.O(o)})();
//# sourceMappingURL=app.326f777d.js.map